<!DOCTYPE html>
<html ng-app="weatherApp">
<head>
  <title>Weather Dashboard</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .favorite-list {
      margin-top: 20px;
    }
  </style>
</head>
<body ng-controller="WeatherController">
  <h1>Weather Dashboard</h1>
  <div>
    <input type="text" ng-model="city" placeholder="Enter city name" />
    <button ng-click="getWeather()">Search</button>
  </div>
  <div ng-if="weatherData">
    <h2>Weather in {{weatherData.name}}</h2>
    <p>Temperature: {{weatherData.main.temp}}Â°C</p>
    <p>Humidity: {{weatherData.main.humidity}}%</p>
    <p>Condition: {{weatherData.weather[0].description}}</p>
  </div>
  <div ng-if="error">{{error}}</div>
  
  <div class="favorite-list">
    <h3>Favorite Cities</h3>
    <ul>
      <li ng-repeat="favCity in favoriteCities | orderBy:'toLowerCase()'">
        {{favCity}}
        <button ng-click="getWeather(favCity)">View Weather</button>
      </li>
    </ul>
    <button ng-click="addFavorite(city)">Add to Favorites</button>
  </div>
  
  <script>
    angular.module("weatherApp", []).controller("WeatherController", function ($scope, $http) {
      const API_KEY = "YOUR_API_KEY";
      
      $scope.favoriteCities = [];
      
      $scope.getWeather = function (cityName) {
        const city = cityName || $scope.city;
        if (!city) {
          $scope.error = "Please enter a city name.";
          return;
        }
        $scope.error = null;
        
        const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${API_KEY}`;
        $http.get(url).then(
          function (response) {
            $scope.weatherData = response.data;
          },
          function () {
            $scope.error = "Unable to fetch weather data. Check the city name.";
          }
        );
      };
      
      $scope.addFavorite = function (city) {
        if (city && !$scope.favoriteCities.includes(city)) {
          $scope.favoriteCities.push(city);
        }
      };
    });
  </script>
</body>
</html>
